{"top":0,"left":0,"width":1914,"height":1014,"_id":44,"_type":"Report","_items":{"7":{"top":240,"left":15,"_id":7,"_type":"TS_Datasource","_links":{"archives":{"type":"SCRIPT","tags":{"config":[{"source":"config"}]},"script":"function(VARS,element,context){\n    let data=VARS.config.data();\n    if (data===undefined){ return undefined; }\n    // console.log(data);\n    return data.ts;\n}"}},"name":"ts","archives":[],"from":"from","to":"to","step":"hour","step_factor":1,"_events":{}},"9":{"top":130,"left":15,"_id":9,"_type":"JSONSource","name":"_config","value":"{\n    \"0\":{\n        \"point\":\"Agadyr_F/u220\",\n        \"ts\":[\n            {\"archive\":\"/root/PROJECT/TAGS/Nodes/Agadyr_F/u220/archivesS/p_load_sc\",\"name\": \"FACT\",\"aggregate\": \"mean\"},\n            {\"archive\":\"/root/PROJECT/TAGS/Nodes/Agadyr_F/u220/futureP/predict_p_load_sc\",\"name\": \"PRED\",\"aggregate\": \"mean\"}\n        ]\n    },\n    \"1\":{\n        \"point\":\"Shymkent_F/u220\",\n        \"ts\":[\n            {\"archive\":\"/root/PROJECT/TAGS/Nodes/Shymkent_F/u220/archivesS/p_load_sc\",\"name\": \"FACT\",\"aggregate\": \"mean\"},\n            {\"archive\":\"/root/PROJECT/TAGS/Nodes/Shymkent_F/u220/futureP/predict_p_load_sc\",\"name\": \"PRED\",\"aggregate\": \"mean\"}\n        ]\n    }\n}","_events":{}},"10":{"top":185,"left":15,"_id":10,"_type":"JSONSource","_links":{"value":{"type":"SCRIPT","tags":{"config":[{"source":"_config"}],"point":[{"filter":"point"}]},"script":"function(VARS,element,context){\n    let config=VARS.config.data();\n    return config[VARS.point.get()];\n}"}},"name":"config","_events":{}},"12":{"top":405,"left":15,"_id":12,"_type":"LocalDatasource","name":"trend","_links":{"data":{"type":"SCRIPT","tags":{"ts":[{"source":"ts"}]},"script":"function(VARS,element,context){\n    // console.log(VARS)\n    \n    let ts=VARS.ts.data();\n\n    console.log(ts)\n    \n    // let result = ts.periods.map( p => {\n\t   // p.name=moment(p.date).format(format);\n\t   // return p;\n    // });\n    \n\treturn ts\n\t\n}"}},"_events":{}},"24":{"top":130,"left":195,"_id":24,"_type":"Trend","name":"","select_archives":false,"set_period":false,"datasource":"trend","series":[{"name":"FACT","axis":"y"},{"name":"PRED","axis":"y"}],"_events":{}},"28":{"top":350,"left":15,"_id":28,"_type":"JSONSource","name":"forecast","_links":{"value":{"type":"SCRIPT","tags":{"ts":[{"source":"ts"}]},"script":"function(VARS,element,context){\n   var value;\n   //value = VARS.my_var.get();\n   return value;\n}"}},"_events":{}},"@filter":{"_id":"@filter","_type":"Filter","_items":{"15":{"left":90,"_id":15,"_type":"Combobox","options":["Agadyr_F/u220","Shymkent_F/u220"],"name":"point","required":true,"z_index":1,"_events":{}},"17":{"left":710,"_id":17,"_type":"Button","width":210,"text":"Сформировать отчет","height":35,"bold":true,"z_index":1,"_events":{"click":{"type":"SCRIPT","value":{"tags":{"from":[{"filter":"from"}]},"script":"function(VARS,element,context){\r    // let now=+(new Date());\r    // let from=+(new Date(VARS.from.get()));\r    // if (from>=now){\r    //     return fp_dev.error(fp_dev.text(\"Отчет не может быть сформирован за будущее число.\\r\\nПожалуйста скореектируйте параметры\"))\r    // }\r\tcontext.run_report();\r}"}}}},"19":{"_id":19,"_type":"Rectangle","width":75,"height":20,"border_style":"none","transparent":true,"text":"Объект:","font_family":"system-ui","bold":true,"font_size":18,"top":15,"z_index":1,"_events":{}},"21":{"left":5,"_id":21,"_type":"Rectangle","width":85,"height":20,"border_style":"none","transparent":true,"text":"Период:","font_family":"system-ui","bold":true,"font_size":18,"top":75,"z_index":1,"_events":{}},"23":{"left":365,"_id":23,"_type":"Rectangle","width":35,"height":25,"border_style":"none","transparent":true,"text":"=>","font_family":"system-ui","bold":true,"font_size":18,"top":75,"z_index":1,"_events":{}},"31":{"left":305,"_id":31,"_type":"Rectangle","width":80,"height":20,"border_style":"none","transparent":true,"text":"Фактор:","font_family":"system-ui","bold":true,"font_size":18,"top":15,"z_index":1,"_events":{}},"33":{"top":70,"left":405,"_id":33,"_type":"DateTimePicker","_links":{"value":{"type":"SCRIPT","tags":{"factor":[{"filter":"factor"}],"date":[{"filter":"date"}]},"script":"function(VARS,element,context){\n    let factor = parseInt(VARS.factor.get());\n    return +new Date(VARS.date.get()) + factor * 24 * 3600000;\n}"}},"width":260,"z_index":1,"name":"to","_events":{}},"41":{"top":15,"left":385,"_id":41,"_type":"Slider","width":280,"z_index":1,"name":"factor","value":1,"max":10,"small_step":1,"large_step":5,"min":1,"_events":{}},"42":{"left":946,"_id":42,"_type":"DateTimePicker","width":265,"z_index":1,"name":"date","enabled":false,"_events":{"init":{"type":"SCRIPT","value":{"script":"function(VARS,element,context){\r    \r    element.set({value: +new Date()});\r    //context.setInterval(()=>{\r    //    element.set({value: +new Date()});\r    //},5000);\r}"}}}},"43":{"top":69,"left":97,"_id":43,"_type":"DateTimePicker","_links":{"value":{"type":"SCRIPT","tags":{"factor":[{"filter":"factor"}],"date":[{"filter":"date"}]},"script":"function(VARS,element,context){\n    let factor = parseInt(VARS.factor.get());\n    return +new Date(VARS.date.get()) - factor * 24 * 3600000;\n}"}},"width":260,"z_index":1,"name":"from","_events":{}}},"height":125,"_events":{}}},"_index":{"7":[],"9":[],"10":[],"12":[],"15":["@filter"],"17":["@filter"],"19":["@filter"],"21":["@filter"],"23":["@filter"],"24":[],"28":[],"31":["@filter"],"33":["@filter"],"41":["@filter"],"42":["@filter"],"43":["@filter"],"@filter":[]},"_events":{}}